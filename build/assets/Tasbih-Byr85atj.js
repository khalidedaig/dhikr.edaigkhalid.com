import{r as x,c as f,o as B,z as _,a as g,b as m,j as h,e,t as d,y as F,l as K,v as O,d as c,u as S,g as M,w,S as j,f as q,F as z}from"./app-BAKlbPj6.js";import{_ as E}from"./Layout-DiWH2tP_.js";import{l as k,_ as J}from"./LearningInsights-9Ri05Stv.js";/* empty css            */const U={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 text-center"},H={key:0,class:"mb-6"},P={class:"arabic-text text-3xl font-bold text-green-600 dark:text-green-400 mb-2"},W={class:"text-lg text-gray-600 dark:text-gray-300 mb-1"},Y={class:"text-sm text-gray-500 dark:text-gray-400"},L={class:"mb-6"},Q={class:"text-6xl font-bold text-blue-600 dark:text-blue-400 mb-2"},X={key:0,class:"mb-4"},Z={class:"text-lg text-gray-600 dark:text-gray-300 mb-2"},ee={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3"},te={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},ae={class:"mb-6"},re={class:"flex flex-col space-y-4"},oe=["disabled"],ne={key:1,class:"mt-4 p-3 bg-green-100 dark:bg-green-900 border border-green-300 dark:border-green-700 rounded-lg"},se={__name:"Counter",props:{dhikr:{type:Object,default:null},storageKey:{type:String,required:!0},defaultGoal:{type:Number,default:33}},setup(u){const n=u,o=x(0),l=x(n.defaultGoal),r=f(()=>l.value),s=x(null),p=f(()=>r.value<=0?0:Math.min(o.value/r.value*100,100)),T=f(()=>r.value>0&&o.value>=r.value);B(()=>{C(),b(),$()}),_([o,l],()=>{A()},{deep:!0}),_(l,(a,t)=>{t!==void 0&&a!==t&&V(a,t)});function C(){const a=localStorage.getItem(n.storageKey);if(a)try{const t=JSON.parse(a);o.value=t.count||0,l.value=t.goal||n.defaultGoal}catch(t){console.error("Error loading from localStorage:",t)}}function A(){const a={count:o.value,goal:l.value};localStorage.setItem(n.storageKey,JSON.stringify(a))}function G(){(r.value<=0||o.value<r.value)&&(o.value++,v("increment"),"vibrate"in navigator&&navigator.vibrate(50),D(),o.value>=r.value&&r.value>0&&N())}function I(){o.value>0&&y(),o.value=0,v("reset"),b()}function R(){l.value<1&&(l.value=1)}function b(){s.value=Date.now()}function y(){s.value&&n.dhikr&&k.recordSession(n.dhikr.id,o.value,r.value,s.value,Date.now())}function N(){y(),b()}function v(a,t={}){const i=n.dhikr?n.dhikr.id:null;k.recordInteraction(a,i,t)}function V(a,t){v("goal_change",{newGoal:a,oldGoal:t,dhikrId:n.dhikr?n.dhikr.id:null})}function $(){if(n.dhikr){const a=k.getSuggestedGoal(n.dhikr.id);a&&a.goal!==l.value&&(localStorage.getItem(n.storageKey)||(l.value=a.goal))}}function D(){try{const a=new(window.AudioContext||window.webkitAudioContext),t=a.createOscillator(),i=a.createGain();t.connect(i),i.connect(a.destination),t.frequency.setValueAtTime(800,a.currentTime),i.gain.setValueAtTime(.1,a.currentTime),i.gain.exponentialRampToValueAtTime(.01,a.currentTime+.1),t.start(a.currentTime),t.stop(a.currentTime+.1)}catch{}}return(a,t)=>(m(),g("div",U,[u.dhikr?(m(),g("div",H,[e("h2",P,d(u.dhikr.arabic),1),e("p",W,d(u.dhikr.transliteration),1),e("p",Y,d(u.dhikr.meaning),1)])):h("",!0),e("div",L,[e("div",Q,d(o.value),1),r.value>0?(m(),g("div",X,[e("div",Z,d(o.value)+" / "+d(r.value),1),e("div",ee,[e("div",{class:"progress-bar bg-green-500 h-3 rounded-full",style:F({width:p.value+"%"})},null,4)]),e("div",te,d(p.value.toFixed(1))+"% Complete ",1)])):h("",!0)]),e("div",ae,[t[1]||(t[1]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Set Goal ",-1)),K(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>l.value=i),type:"number",min:"1",max:"10000",class:"w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-center bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",onChange:R},null,544),[[O,l.value,void 0,{number:!0}]])]),e("div",re,[e("button",{onClick:G,class:"counter-animation bg-green-500 hover:bg-green-600 dark:bg-green-600 dark:hover:bg-green-700 text-white font-bold py-4 px-8 rounded-lg text-xl transition-colors duration-200 focus:outline-none focus:ring-4 focus:ring-green-300 dark:focus:ring-green-800 cursor-pointer",disabled:r.value>0&&o.value>=r.value},t[2]||(t[2]=[e("span",{class:"text-2xl"},"+",-1),e("span",{class:"block text-sm mt-1"},"Tap to Count",-1)]),8,oe),e("button",{onClick:I,class:"bg-red-500 hover:bg-red-600 dark:bg-red-600 dark:hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-4 focus:ring-red-300 dark:focus:ring-red-800 cursor-pointer"}," Reset ")]),T.value?(m(),g("div",ne,t[3]||(t[3]=[e("p",{class:"text-green-800 dark:text-green-200 font-medium"}," 🎉 Goal Reached! Well done! ",-1)]))):h("",!0)]))}},le={class:"max-w-6xl mx-auto"},ie={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},de={class:"bg-green-50 dark:bg-green-900 rounded-lg p-4"},ue={class:"mt-4 text-center"},ce={class:"md:col-span-1"},ve={__name:"Tasbih",setup(u){const n=x(null);function o(r){console.log("Applying goal suggestion:",r)}function l(r){console.log("Received recommendation:",r)}return(r,s)=>(m(),g(z,null,[c(S(M),{title:"Tasbih Counter"}),c(E,null,{default:w(()=>[e("div",le,[s[4]||(s[4]=e("h1",{class:"text-3xl font-bold text-center text-gray-900 dark:text-white mb-8"}," Tasbih Counter ",-1)),c(J,{"current-dhikr-id":"general-tasbih","dhikr-list":[],onApplyGoal:o,onApplyRecommendation:l,ref_key:"learningInsightsRef",ref:n},null,512),e("div",ie,[e("div",de,[s[1]||(s[1]=e("h3",{class:"font-semibold text-green-800 dark:text-green-200 mb-3"}," Common Dhikr: ",-1)),s[2]||(s[2]=e("div",{class:"space-y-2 text-sm"},[e("div",{class:"text-center"},[e("p",{class:"arabic-text text-lg text-green-700 dark:text-green-300"}," سُبْحَانَ ٱللَّٰهِ "),e("p",{class:"text-green-600 dark:text-green-400"}," Subhan Allah (33 times) ")]),e("div",{class:"text-center"},[e("p",{class:"arabic-text text-lg text-green-700 dark:text-green-300"}," ٱلْـحَمْدُ لِلَّٰهِ "),e("p",{class:"text-green-600 dark:text-green-400"}," Alhamdulillah (33 times) ")]),e("div",{class:"text-center"},[e("p",{class:"arabic-text text-lg text-green-700 dark:text-green-300"}," ٱللَّٰهُ أَكْبَرُ "),e("p",{class:"text-green-600 dark:text-green-400"}," Allahu Akbar (34 times) ")])],-1)),e("div",ue,[c(S(j),{href:"/dhikr",class:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200 font-medium"},{default:w(()=>s[0]||(s[0]=[q(" Browse more dhikr → ")])),_:1,__:[0]})])]),e("div",ce,[c(se,{"storage-key":"main-tasbih-counter","default-goal":33})]),s[3]||(s[3]=e("div",{class:"bg-blue-50 dark:bg-blue-900 rounded-lg p-4"},[e("h3",{class:"font-semibold text-blue-800 dark:text-blue-200 mb-2"}," How to use: "),e("ul",{class:"text-sm text-blue-700 dark:text-blue-300 space-y-1"},[e("li",null,'• Tap the "+" button to increment your count'),e("li",null,"• Set your goal using the number input"),e("li",null,"• Your progress is automatically saved"),e("li",null,"• Use the reset button to start over")])],-1))])])]),_:1})],64))}};export{ve as default};
